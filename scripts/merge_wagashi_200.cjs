const fs = require('fs');
const path = require('path');

const GENRES = ['mochi','an','nerikiri','baked','sugar','manju','other'];
const TYPES = ['shop','cafe','factory'];
const shopNames = ['和菓子店','菓子処','甘味処','茶房','菓子工房','老舗','和菓子処'];

const SPOTS = [
  ['北海道',141.35,43.06,'札幌'],['北海道',140.73,41.77,'函館'],['北海道',141.00,43.20,'小樽'],['北海道',142.36,43.77,'旭川'],['北海道',141.58,43.20,'岩見沢'],
  ['青森県',140.74,40.82,'弘前'],['青森県',140.87,40.82,'青森'],['岩手県',141.15,39.70,'盛岡'],['岩手県',141.88,39.30,'宮古'],['岩手県',141.12,39.62,'花巻'],
  ['宮城県',140.87,38.27,'仙台'],['宮城県',140.97,38.42,'松島'],['秋田県',140.10,39.72,'秋田'],['秋田県',140.49,39.18,'角館'],['山形県',140.36,38.25,'山形'],
  ['山形県',140.13,38.15,'米沢'],['福島県',139.93,37.50,'会津若松'],['福島県',140.47,37.75,'福島'],['福島県',140.89,37.40,'いわき'],
  ['茨城県',140.47,36.37,'水戸'],['茨城県',140.45,36.10,'つくば'],['茨城県',140.50,36.35,'笠間'],['栃木県',139.60,36.72,'日光'],
  ['栃木県',139.88,36.56,'宇都宮'],['栃木県',139.73,36.33,'足利'],['群馬県',139.06,36.39,'前橋'],['群馬県',138.97,36.40,'高崎'],
  ['群馬県',138.90,36.26,'草津'],['埼玉県',139.48,35.92,'川越'],['埼玉県',139.63,35.91,'大宮'],['埼玉県',139.60,35.87,'浦和'],
  ['千葉県',140.12,35.61,'千葉'],['千葉県',139.90,35.65,'船橋'],['千葉県',140.32,35.73,'成田'],['東京都',139.70,35.68,'丸の内'],
  ['東京都',139.71,35.66,'渋谷'],['東京都',139.77,35.67,'池袋'],['東京都',139.76,35.65,'品川'],['東京都',139.70,35.69,'上野'],
  ['東京都',139.65,35.72,'立川'],['神奈川県',139.65,35.46,'横浜'],['神奈川県',139.55,35.32,'鎌倉'],['神奈川県',139.35,35.25,'箱根'],
  ['神奈川県',139.58,35.44,'藤沢'],['新潟県',139.04,37.92,'新潟'],['新潟県',138.85,37.45,'長岡'],['新潟県',139.22,37.62,'新発田'],
  ['富山県',137.21,36.70,'富山'],['富山県',137.57,36.75,'立山'],['石川県',136.63,36.59,'金沢'],['石川県',136.22,36.53,'加賀'],
  ['福井県',136.22,36.07,'福井'],['福井県',136.18,35.65,'敦賀'],['山梨県',138.57,35.66,'甲府'],['山梨県',138.58,36.35,'軽井沢'],
  ['長野県',138.19,36.65,'長野'],['長野県',137.97,36.24,'松本'],['長野県',137.73,36.24,'上田'],['長野県',138.55,36.40,'諏訪'],
  ['岐阜県',136.72,35.42,'岐阜'],['岐阜県',137.25,36.15,'高山'],['岐阜県',136.90,35.36,'多治見'],['静岡県',138.38,34.98,'静岡'],
  ['静岡県',139.00,35.10,'熱海'],['静岡県',137.72,34.97,'浜松'],['静岡県',138.95,34.97,'修善寺'],['愛知県',136.91,35.18,'名古屋'],
  ['愛知県',137.15,35.08,'豊田'],['愛知県',136.78,35.18,'岡崎'],['三重県',136.69,34.49,'伊勢'],['三重県',136.51,34.73,'津'],
  ['三重県',136.45,34.88,'桑名'],['滋賀県',135.86,35.00,'大津'],['滋賀県',136.26,35.27,'彦根'],['滋賀県',135.87,35.12,'近江八幡'],
  ['京都府',135.77,35.01,'祇園'],['京都府',135.52,34.99,'嵐山'],['京都府',135.76,35.02,'烏丸'],['京都府',135.78,35.00,'河原町'],
  ['京都府',135.51,34.95,'丹波'],['大阪府',135.50,34.69,'難波'],['大阪府',135.52,34.70,'梅田'],['大阪府',135.49,34.65,'天王寺'],
  ['大阪府',135.55,34.68,'堺'],['大阪府',135.47,34.64,'岸和田'],['兵庫県',135.20,34.69,'神戸'],['兵庫県',134.69,34.83,'姫路'],
  ['兵庫県',135.34,34.74,'西宮'],['兵庫県',134.85,34.83,'明石'],['奈良県',135.83,34.69,'奈良'],['奈良県',135.79,34.68,'斑鳩'],
  ['奈良県',135.77,34.68,'飛鳥'],['和歌山県',135.17,34.23,'和歌山'],['和歌山県',135.51,33.73,'白浜'],['和歌山県',135.20,34.25,'橋本'],
  ['鳥取県',134.24,35.50,'鳥取'],['鳥取県',133.77,35.43,'倉吉'],['鳥取県',133.85,35.50,'米子'],['島根県',133.05,35.47,'松江'],
  ['島根県',132.76,35.37,'出雲'],['島根県',132.22,35.18,'津和野'],['岡山県',133.93,34.65,'岡山'],['岡山県',133.77,34.83,'倉敷'],
  ['岡山県',133.62,34.67,'備前'],['広島県',132.46,34.40,'広島'],['広島県',132.45,34.39,'宮島口'],['広島県',133.08,34.40,'福山'],
  ['山口県',130.94,33.95,'下関'],['山口県',131.47,34.18,'山口'],['山口県',131.18,34.05,'萩'],['徳島県',134.56,34.07,'徳島'],
  ['徳島県',134.00,34.07,'鳴門'],['徳島県',133.80,34.07,'美馬'],['香川県',134.04,34.34,'高松'],['香川県',133.55,34.32,'琴平'],
  ['香川県',133.75,34.28,'丸亀'],['愛媛県',132.77,33.84,'松山'],['愛媛県',133.54,33.84,'今治'],['愛媛県',132.77,33.84,'道後'],
  ['高知県',133.53,33.56,'高知'],['高知県',133.00,33.50,'室戸'],['高知県',133.75,33.56,'四万十'],['福岡県',130.40,33.59,'福岡'],
  ['福岡県',130.53,33.52,'太宰府'],['福岡県',130.37,33.52,'柳川'],['福岡県',130.82,33.87,'北九州'],['佐賀県',130.30,33.25,'佐賀'],
  ['佐賀県',130.20,33.32,'武雄'],['佐賀県',130.18,33.28,'唐津'],['長崎県',129.88,32.75,'長崎'],['長崎県',129.97,33.16,'佐世保'],
  ['長崎県',130.20,32.75,'島原'],['熊本県',130.70,32.79,'熊本'],['熊本県',130.98,32.79,'阿蘇'],['熊本県',130.69,32.50,'人吉'],
  ['大分県',131.61,33.24,'湯布院'],['大分県',131.51,33.24,'別府'],['大分県',131.35,33.24,'日田'],['宮崎県',131.42,31.91,'宮崎'],
  ['宮崎県',131.09,31.59,'日南'],['宮崎県',131.40,31.92,'高千穂'],['鹿児島県',130.56,31.60,'鹿児島'],['鹿児島県',130.55,31.60,'天文館'],
  ['鹿児島県',130.30,31.60,'指宿'],['沖縄県',127.68,26.21,'那覇'],['沖縄県',127.75,26.22,'首里'],['沖縄県',128.00,26.59,'本部'],
  ['沖縄県',127.80,26.34,'読谷'],
];

const newFeatures = SPOTS.slice(0, 140).map(([pref, lng, lat, area], i) => {
  const id = 61 + i;
  const type = TYPES[i % 3];
  const genre = GENRES[i % 7];
  const suffix = shopNames[i % shopNames.length];
  const name = area + ' ' + suffix;
  return {
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [lng + (i % 5) * 0.002 - 0.004, lat + (i % 7) * 0.002 - 0.006],
    },
    properties: {
      id: 'w-' + id,
      genre,
      name,
      name_reading: area + ' わがし',
      prefecture: pref,
      address: pref + area,
      type,
      characteristics: pref + area + 'の和菓子。',
      source: 'national',
    },
  };
});

const jsonPath = path.join(__dirname, '../src/data/japan_wagashi.json');
const data = JSON.parse(fs.readFileSync(jsonPath, 'utf8'));
data.features = data.features.concat(newFeatures);
fs.writeFileSync(jsonPath, JSON.stringify(data), 'utf8');
console.log('Done. Total features:', data.features.length);
